<link href='../../css/static-new.css' rel='stylesheet'>
<script src="https://widget.cloudpayments.ru/bundles/cloudpayments"></script>

<div class="inner">

  <div class="text-wrap pages">
    <h1>Поддержать "Карту полиции"</h1>
    <p>Ваша поддержка важна для нас</p>
    <div class="comment-form pages-form">
            <form onsubmit="return false">
                <input type="number" name="" placeholder="Сумма в рублях" id="donate-amount">
                <input type="email" name="email" placeholder="Ваше email (необязательно)" id="donate-email">
                <input type="checkbox" name="agree" value="agree" class="agree" checked>Я принимаю <a href="#" data-link="html/info/oferta.html">Договор оферты</a> и <a href="#" data-link="html/info/policy.html" >Соглашение об использовании персональных данных</a><br>
                <p id="warning">Для продолженич необходимо принять условия</p>
                <div class="btns">
                    <button id="payButton" class="btn btn-primary btn-accept contact" type="submit">Поддержать</button>
                </div>
            </form>
        </div>
      </div>
  </div>
  <script src="../../libs/jquery-2.1.3.min.js"></script>

  <script>
  $('body').find('[data-link]').on('click', function() {
      var link = $(this).attr('data-link');
      $('#info-holder-iframe', parent.document).attr('src', link)
  })
  </script>
  <script type="text/javascript">
    var payHandler = function () {
          //требуется библиотека jquery
          var widget = new cp.CloudPayments();
          var pamount = $('#donate-amount').val();
          var pemail = $('#donate-email').val();
          var numAmount = parseInt(pamount)
          widget.charge({ // options
                  publicId: 'pk_9d127a77290785d4bf80476596ba3',
                  description: 'Поддержать работу сайта policemap.ru',
                  amount: numAmount, //сумма
                  currency: 'RUB',
                  invoiceId: '1234567', //номер заказа
                  accountId: pemail, //плательщик
              },
              function (options) { // success
                  //действие при успешном платеже
              },
              function (reason, options) { // fail
                  //действие при неуспешном платеже
              });
      };
      $("#payButton").on("click", function(){
        if ($('input.agree').is(':checked')) {
          payHandler()
        } else {
          $('#warning').show();
        }
      }); //кнопка "Оплатить"
  </script>
