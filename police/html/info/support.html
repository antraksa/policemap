<html>
<head>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400" rel="stylesheet">
<link href="../../css/pages.css" rel="stylesheet">
<link href="../../css/main.css" rel="stylesheet">
<script src="https://widget.cloudpayments.ru/bundles/cloudpayments"></script>

</head>
<body class="pages">
  <div class="text-wrap">
    <h1>Поддержать "Карту полиции"</h1>
    <p>Ваша поддержка важна для нас</p>
    <div class="comment-form pages-form">
            <form onsubmit="return false">
                <input type="number" name="" placeholder="Сумма в рублях" id="donate-amount">
                <input type="email" name="email" placeholder="Ваше email (необязательно)" id="donate-email">
                <div class="btns">
                    <button id="payButton" class="btn btn-primary btn-accept" type="submit">Поддержать</button>
                </div>
            </form>
        </div>
  </div>
  <script src="../../libs/jquery-2.1.3.min.js"></script>


  <script type="text/javascript">
    var payHandler = function () {
          //требуется библиотека jquery
          var widget = new cp.CloudPayments();
          var pamount = $('#donate-amount').val();
          var pemail = $('#donate-email').val();
          var numAmount = parseInt(pamount)
          widget.charge({ // options
                  publicId: 'pk_9d127a77290785d4bf80476596ba3',
                  description: 'Поддержать работу сайта policemap.ru',
                  amount: numAmount, //сумма
                  currency: 'RUB',
                  invoiceId: '1234567', //номер заказа
                  accountId: pemail, //плательщик
              },
              function (options) { // success
                  //действие при успешном платеже
              },
              function (reason, options) { // fail
                  //действие при неуспешном платеже
              });
      };
      $("#payButton").on("click", payHandler); //кнопка "Оплатить"
  </script>
</body>
</html>
