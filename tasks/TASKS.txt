ВАЖНО и СРОЧНО
  ? 1. editor.html: редактирование телефонов (в частности участковых) - все ломается после сохранения
  + 2. editor.html: при изменении Воронежа сохраняются данные Спб - все ломается после сохранения
  + 3. editor.html: при добавлении новости она добавляется в конец, как последняя, должна добавляться в начало
  4. Поиск по местоположению работает некорректно:
    + 1) У меня не отображается “Адрес обслуживается”. Вот то, чего не хватает на скриншоте:
    searchPoint (2) [59.942830699999995, 30.3475806] - search.js:104
    select region pregion {region: {…}, photoLink: "data/photo/spb/OP_78_ph2.JPG", ind: 70, department: pdepartment, anketaPublished: true, …}  - details.js:68
    center {coords: Array(2), zoom: 13} - police.js:333
    На картинках “Поиск на карте" видно, что сначала у меня выбирается правильный участковый, Шашин, а затем он несколько раз меняется, пока не остается неправильный. В “адрес обслуживается” с моем случае должно попадать “ул. Пестеля"
    + 2) Если адрес не найден в базе, то вместо этого выводить “Адрес не найден в базе участковых” и показывать только отдел. Сейчас похоже, что в таких случаях действительно показывается только отдел, но также нужно выводить предупреждение, что адрес не найден, иначе это непонятно
   (тяжело) 3) Заметен выбор региона перед выбором сектора (особенно на мобильных)

  5. Участковые по Воронежу распарсены неверно. См. участковый Денисов.
  6. parser-ops.html: всвязи со скорым добавлением Москвы необходимо привести в порядок. Хотя бы назвать кнопки по названию функции, иначе мне понятно, что они делают. Предположим, я сама могу это сделать, но у меня миллион вопросов:
    если save закомменчен - это так должно быть или надо раскомментить? Наверное надо раскомментить.
    есть еще бесхозная validateSectors() - это что-то типа "Исправить сектора СПб"?
    верно ли, что для каждого города должно быть: 1)ддосить, 2)ресолвить (=расставить на карте), 3)исправить участковых (в соответствии с файлом checked), 4) ресолвить отделения 5) ресолвить управления?
    хорошо бы сделать кнопки "Перезагрузить [город]", которые бы делали все в нужном порядке для каждого города в соответствии с файлами из /data/[город]


ВАЖНО, но НЕ СРОЧНО
  1. При выборе участкового из кластера он не подсвечивается, не появляется в списке слева, не снимается выделение со старого участкового.
  2. Если выбрать участкового, а потом не относящийся к нему отдел полиции, участковый продолжает подсвечиваться. Тоже самое и наоборот (отдел потом участковый).
  3. parser-ops.html: в data/resolved/../sectors.json "photo" должен быть полный путь к фото:
    для СПб: //static.mvd.ru/upload/site78/document_district/ХХХХХХХХ-70xx80.jpg
    для Воронежа: //static.mvd.ru/upload/site39/document_district/ХХХХХХХХ-70xx80.jpg
  4. Кажется, поиск по базам работает только после ввода слова целиком, а желательно искать по части слова тоже. Пример: поиск улицы "разъезжая": результат от яндекса появляется после ввода "разъезж", а из баз - только когда "разъезжая" введено полностью. Надо как-то более интуитивно понятно сделать:
    - начинать поиск по базе раньше, когда введено 3-4 символа.
    - пока поиск по базе не начинался выводить "Введите больше символов", а не только "Ничего не найдено". Или заменить "Ничего не найдено" на "Здесь появятся результаты поиска"
    - не выводить результат яндекса раньше, чем результаты из базы
  5. Иконка подразделения на транспорте не всегда отображается на карте, не выделяется рыжим цветом при выборе, только увеличивается. Пример: https://policemap.ru/police.html#city=2&type=region&rowId=8
  6. Надо немного изменить подсчет рейтингов. Кажется, в какой-то момент я не сообщила тебе тот факт, что открытость и доступность неравноценны. И очень долго этого не замечала. Из 5 баллов, доступность - максимум 1,5, а открытость - максимум 3,5. Соответственно, они складываются для определения общего балла, а не среднее берется. Вот как надо делать на примере 78 отдела СПб:
  Исходя из ответов на вопросы у отдела
  - доступность = 31,57894736842105%
  - открытость = 45,652173913043476%
  Если 100% доступности = 1.5, а 100% открытости = 3.5, то
  - доступность = 1.5 * 0,3157894736842105 = 0.473684210526316
  - открытость = 3,5 * 45,652173913043476 = 1.597826086956522
  - общий = 0.473684210526316 + 1.597826086956522 = 2.071510297482838
  Округляем, получаем
  - доступность = 0.5
  - открытость = 1.6
  - общий = 2.1
  Сейчас общий рейтинг 78 отдела равен 1.9.


НЕ ОСОБО ВАЖНО, ВОПРОСЫ, ИНФО
  1. Нам предстоит добавить Москву. Договорилась так: если они смогут сразу дать все данные правильно и у нас сработают стандартные функции, то сделаем это бесплатно. Но я очень в этом сомневаюсь, поэтому: если не срабатывает или в данных косяки, мы смотрим, насколько все плохо по обстоятельствам и решаем, сколько это будет стоить.
  2. Прозрачность полигонов-регионов = 0.4? Должна быть такая. В какой строке регулируется?
  3. Где настроить цвет “Без рейтинга”? Посмотри класс .not-rated - нужно для "Обозначений".
  4. Чтобы работал grunt сделай npm install grunt-text-replace --save-dev
  5. https://policemap.ru/police.html#city=2&type=region&rowId=8 - по этому полигону нельзя кликнуть, он находится под полигоном 6го ОП. С одной стороны, я понимаю, что мы не можем знать, какой полигон должен быть сверху. С другой стороны, с другими отделами (например https://policemap.ru/police.html#city=0&type=region&rowId=79) почему-то нет такой проблемы
  6. Кажется, объединить разорванные полигоны можно с помощью мультиполигона, предусмотренного geojson - http://wiki.geojson.org/GeoJSON_draft_version_6#MultiPolygon, https://en.wikipedia.org/wiki/GeoJSON (см. MultiPolygon). То есть наверное нужно по id объединять координаты в правильный массив.
